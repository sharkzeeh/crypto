# Crypto
Данное приложение позволяет посчитать скользящее среднее для различных свеч для пар вида "COIN"/USDT (BTC/USDT) на binance

Требуемые криптовалюты и значение для временного промежутка для скользящего среднего (в секундах) указывается в файле `constants.py`

(Для удобства я привел значение скользящего среднего за последние 5 секунд)

### Формат вывода в консоль

```python
      Coin      MA_3m                      Time
---------- ---------- -------------------------
       ETH    2298.47          05-07-2021 13:47
       BTC   34488.17          05-07-2021 13:47
       BNB     305.53          05-07-2021 13:47
       ETH    2299.68          05-07-2021 13:48
       BTC   34501.15          05-07-2021 13:48
       BNB     305.54          05-07-2021 13:48
```

где
* Coin - название криптовалюты в паре c USDT
* MA_3m - значение скользящего среднего (в данном случае скользящее среднее за последние 3 минуты)
* Time - время замера в формате `dd-mm-yyyy hh:mm`

### Локальный запуск
Для локального запуска рекомендуется создать виртуальную среду с помощью команды

```sh

python3.8 venv -m myenv
```

и затем установить зависимости

```sh
python3 install -r requirements.txt
```

Запуск программы осуществляется с помощью:
```sh
python3 main.py
```

### Docker

Для использования докерконтейнера можно запустить команды, которые находятся в Makefile

```Make
make build -- создание контейнера со всеми питон-зависимостями
make start -- запуск программы python3 main.py внутри собранного контейнера
make stop -- остановка контейнера
```

Другой вариант: загрузить докер образа с dockerhub:

```sh
docker pull https://hub.docker.com/repository/docker/sharkzeeh/crypto
```

После остановки работы контейнера в корневой директории проекта появится файл `log.csv`, в котором будут находится залогированные данные из контейнера

### Unit testing
В корневой директории запустить
```sh
pytest
```
или

```sh
make test
```